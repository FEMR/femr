@(hpiTab: femr.common.models.TabItem, patientEncounterItem: femr.common.models.PatientEncounterItem, settings: femr.common.models.SettingItem, numberOfHpiTabs: java.lang.Integer)

@import femr.ui.views.html.partials.medical.severityDropDown;

<div class="controlWrap" id="hpiControl">


    @if(patientEncounterItem.getChiefComplaints.size > 1) {
        @* Slider for navigating each HPI, only shows up if > 1 chief complaint exists *@
        <div id="chiefComplaintSliderWrap">
            @* Left arrow *@
            <div id="chiefComplaintLeftArrow">
                <span> < </span>
            </div>

            @* Complaint list *@
            @for(x <- 1 to patientEncounterItem.getChiefComplaints.size) {
                <div class="chiefComplaintText @if(x > 1) {hidden}" id="cc@x">
                    <span>@patientEncounterItem.getChiefComplaints.get(x - 1)</span>
                </div>
            }

            @* Right arrow *@
            <div id="chiefComplaintRightArrow">
                <span> > </span>
            </div>


        </div>
    }
    @* Make an HPI page for each chief complaint *@
    @for(x <- 1 to numberOfHpiTabs) {
        @* Hide the div if multiple chief complaints *@
        <div class="hpiWraps @if(x > 1) {hidden}" id="hpi@x">

        @if(!settings.isConsolidateHPI) {
            <div class="leftHPI">

                <div class="staticField">
                    <label for="onset">Onset</label>
                    <input name="onset" type="text" class="fInput" value="@if(hpiTab.getTabFieldItemByName("onset" + (x - 1)) != null) @{
                        hpiTab.getTabFieldItemByName("onset" + (x - 1)).getValue
                    }" />
                </div>

                <div class="staticField">
                    <label for="radiation">Radiation</label>
                    <input name="radiation" type="text" class="fInput" value="@if(hpiTab.getTabFieldItemByName("radiation" + (x - 1)) != null) @{
                        hpiTab.getTabFieldItemByName("radiation" + (x - 1)).getValue
                    }" />
                </div>

            </div>

            <div class="rightHPI">
                <div class="staticField">
                    <label for="quality">Quality</label>
                    <input name="quality" type="text" class="fInput" value="@if(hpiTab.getTabFieldItemByName("quality" + (x - 1)) != null) @{
                        hpiTab.getTabFieldItemByName("quality" + (x - 1)).getValue
                    }" />
                </div>

                @* Severity *@
                <div class="staticField">
                @if(hpiTab.getTabFieldItemByName("severity" + (x - 1)) != null) {
                    @severityDropDown(hpiTab.getTabFieldItemByName("severity" + (x - 1)).getValue)
                } else {
                    @severityDropDown(null)
                }
                </div>


            </div>
            <div class="bottomHPI">

                <div class="staticField">
                    <label for="provokes">Provokes</label>
                    <input name="provokes" type="text" class="fInput" value="@if(hpiTab.getTabFieldItemByName("provokes" + (x - 1)) != null) @{
                        hpiTab.getTabFieldItemByName("provokes" + (x - 1)).getValue
                    }" />
                </div>

                <div class="staticField">
                    <label for="palliates">Palliates</label>
                    <input name="palliates" type="text" class="fInput" value="@if(hpiTab.getTabFieldItemByName("palliates" + (x - 1)) != null) @{
                        hpiTab.getTabFieldItemByName("palliates" + (x - 1)).getValue
                    }" />
                </div>

                <div class="staticField">
                    <label for="timeOfDay">Time Of Day</label>
                    <input name="timeOfDay" type="text" class="fInput" value="@if(hpiTab.getTabFieldItemByName("timeOfDay" + (x - 1)) != null) @{
                        hpiTab.getTabFieldItemByName("timeOfDay" + (x - 1)).getValue
                    }" />
                </div>

                <div class="staticField">
                    <label for="narrative">Narrative</label>
                    <input name="narrative" type="text" class="fInput" value="@if(hpiTab.getTabFieldItemByName("narrative" + (x - 1)) != null) @{
                        hpiTab.getTabFieldItemByName("narrative" + (x - 1)).getValue
                    }" />
                </div>

                <div class="staticField">
                    @* Physical Examination *@
                    <label for="physicalExamination">Physical Examination</label>
                    <textarea rows="3" name="physicalExamination" class="form-control input-sm">@if(hpiTab.getTabFieldItemByName("physicalExamination" + (x - 1)) != null) @{
                        hpiTab.getTabFieldItemByName("physicalExamination" + (x - 1)).getValue
                    }</textarea>
                </div>
            </div>


        } else {
            <div class="staticField">
                <label for="narrative">Narrative</label>
                <textarea name="narrative" class="fNarrativeTextArea" >@if(hpiTab.getTabFieldItemByName("narrative" + (x - 1)) != null) @{
                    hpiTab.getTabFieldItemByName("narrative" + (x - 1)).getValue
                }</textarea>
            </div>
        }
        </div>

    }


</div>
