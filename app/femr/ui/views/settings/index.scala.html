@(currentUser: femr.common.dtos.CurrentUser, assets: AssetsFinder)
@import femr.ui.views.html.layouts.main

@additionalScripts = {
    <script type="text/javascript" src="@assets.path("js/libraries/handlebars.min.js")"></script>
    <script type="text/javascript" src="@assets.path("js/libraries/typeahead.bundle.min.js")"></script>

    <script>
            if (window.location.search.indexOf('feedback=received') > -1) {
                $('#feedbackResponse').css({"display":"block"});
                setTimeout(function () {
                    $('#feedbackResponse').show().delay(2000).fadeOut('fast');
                }, 2000);
            }
    </script>
    <script>
            document.addEventListener('DOMContentLoaded', function(event) {
                let languageData;
                fetch('@routes.Assets.versioned("json/languages.json")')
                        .then(response => response.json())
                        .then(data => {
                            languageData = data;
                            const initialLanguage = localStorage.getItem('languageCode') || 'en';
                            updateLanguage(initialLanguage);
                            document.getElementById('languageSelect').value = initialLanguage;
                        });

                document.getElementById('languageSelect').addEventListener('change', function() {
                    updateLanguage(this.value);
                });

                function updateTextContent(elementId, value) {
                    const element = document.getElementById(elementId);
                    if (element) {
                        element.textContent = value;
                    }
                }

                function updateLanguage(languageCode = "en", currUser = " Admin!") {
                    localStorage.setItem('languageCode', languageCode);
                    updateTextContent("home_index_h2_Welcome", languageData[languageCode].home_index_h2_Welcome + currUser);
                    updateTextContent("home_index_div_Your", languageData[languageCode].home_index_div_Your);
                    updateTextContent("home_index_p_Please", languageData[languageCode].home_index_p_Please);
                    updateTextContent("home_index_p_Or", languageData[languageCode].home_index_p_Or);
                    updateTextContent("home_index_p_Search", languageData[languageCode].home_index_p_Search);
                    const patientSearch = document.getElementById("patientSearch");
                    if (patientSearch) {
                        patientSearch.placeholder = languageData[languageCode].home_index_div_ID;
                    }
                }
            });
    </script>
}


@top = {
    <div class="jumbotron">
        <div class="container">
            <h2 id="settings">Settings</h2>
        </div>
    </div>
}

@main("Home", currentUser, outsideContainerTop = top, scripts = additionalScripts, assets = assets) {
    @*<ul>
    @for(role <- currentUser.getRoles) {
    <li>@role.getName</li>
    }
    </ul> *@
}
